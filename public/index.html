<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Liga da Firma 2025 ‚öΩ</title>
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#143722" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./assets/styles.css" />
</head>

<body>
  <!-- ================= HERO / HEADER ================= -->
  <header class="hero container" role="banner">
    <div class="ball" aria-hidden="true">‚öΩ</div>
    <div>
      <h1>LIGA DA FIRMA 2025</h1>
      <div class="sub muted" id="subtitulo">Rodada em andamento‚Ä¶</div>
    </div>
  </header>

  <!-- ================= NAV ================= -->
  <nav class="container" aria-label="Navega√ß√£o principal" style="margin-top:10px">
    <div class="row" role="tablist" aria-orientation="horizontal">
      <button class="btn-ghost" data-route="/regras"  role="tab" aria-controls="regras">‚öôÔ∏è Regras</button>
      <button class="btn-ghost" data-route="/times"   role="tab" aria-controls="times">üßë Atletas</button>
      <button class="btn-ghost" data-route="/tatico"  role="tab" aria-controls="tatico">üìã Campo</button>
      <button class="btn-ghost" data-route="/registro" role="tab" aria-controls="registro">üóíÔ∏è Partida</button>
      <button class="btn-ghost" data-route="/cal"     role="tab" aria-controls="calendario">üìÖ Calend√°rio</button>
      <button class="btn-ghost" data-route="/ranking" role="tab" aria-controls="tabela">üìä Ranking</button>
      <button class="help-toggle" type="button" aria-pressed="true" style="margin-left:auto">Mostrar dicas</button>
    </div>
  </nav>

  <!-- ================= MAIN APP ================= -->
  <main class="container">

    <!-- ===== Regras ===== -->
    <section class="card" id="regras">
      <h2>üèÜ Regras
        <span class="help" aria-expanded="false" aria-label="Ajuda">
          ?
          <span class="tooltip">Defina os pontos por vit√≥ria, empate e derrota. O ranking recalcula automaticamente ap√≥s cada partida.</span>
        </span>
      </h2>

      <div class="helpbar">
        <div class="hint" data-hint>
          <b>Como funciona:</b> escolha a pontua√ß√£o para <u>vit√≥ria</u>, <u>empate</u> e <u>derrota</u>. Voc√™ pode mudar a qualquer momento.
        </div>
      </div>

      <div class="grid-3">
        <div>
          <div class="section-title muted">
            Vit√≥ria
            <span class="help" aria-expanded="false" aria-label="Ajuda">
              ?
              <span class="tooltip">Pontos concedidos quando um time vence.</span>
            </span>
          </div>
          <input class="input" id="ptsV" type="number" min="0" step="1" inputmode="numeric" />
        </div>
        <div>
          <div class="section-title muted">
            Empate
            <span class="help" aria-expanded="false" aria-label="Ajuda">
              ?
              <span class="tooltip">Pontos dados para cada equipe quando o jogo termina empatado.</span>
            </span>
          </div>
          <input class="input" id="ptsE" type="number" min="0" step="1" inputmode="numeric" />
        </div>
        <div>
          <div class="section-title muted">
            Derrota
            <span class="help" aria-expanded="false" aria-label="Ajuda">
              ?
              <span class="tooltip">Pontos concedidos ao time derrotado (geralmente 0).</span>
            </span>
          </div>
          <input class="input" id="ptsD" type="number" min="0" step="1" inputmode="numeric" />
        </div>
      </div>
    </section>

    <!-- ===== Atletas ===== -->
    <section class="card" id="times">
      <h2>üßë Atletas
        <span class="help" aria-expanded="false" aria-label="Ajuda">
          ?
          <span class="tooltip">Adicione nomes. Cada chip alterna <b>Fora ‚Üí A ‚Üí B ‚Üí Fora</b> ao clicar. Use ‚ÄúInverter A/B‚Äù para trocar os times.</span>
        </span>
      </h2>

      <div class="helpbar">
        <div class="hint" data-hint>
          <b>Elenco e times:</b> digite o nome e clique em <b>Adicionar</b>. Toque no chip para alternar o jogador entre Fora, Time A e Time B.
        </div>
      </div>

      <div class="row">
        <input class="input" id="novoJogador" placeholder="Nome do atleta" autocomplete="off" />
        <button class="btn" id="btnAddJogador">Adicionar</button>
        <button class="btn-ghost" id="btnUndoJogador">Desfazer √∫ltimo</button>
      </div>

      <div class="section-title muted">Elenco (toque para alternar: fora ‚Üí A ‚Üí B ‚Üí fora)</div>
      <div id="chipsAtletas" class="chips" aria-live="polite"></div>

      <div class="grid-2 mt12">
        <div>
          <div class="section-title muted">Time A</div>
          <div class="team" id="listaA"></div>
        </div>
        <div>
          <div class="section-title muted">Time B</div>
          <div class="team" id="listaB"></div>
        </div>
      </div>

      <div class="controls">
        <button class="btn-ghost" id="btnLimparSel">Limpar sele√ß√£o</button>
        <button class="btn-ghost" id="btnInverter">Inverter A/B</button>
      </div>
    </section>

    <!-- ===== Campo T√°tico ===== -->
    <section class="card" id="tatico">
      <h2>üìã Campo t√°tico
        <span class="help" aria-expanded="false" aria-label="Ajuda">
          ?
          <span class="tooltip">Escolha uma forma√ß√£o para cada time ou deixe em <i>auto</i>. Os nomes s√£o posicionados automaticamente.</span>
        </span>
      </h2>

      <div class="helpbar">
        <div class="hint" data-hint>
          <b>Forma√ß√µes:</b> selecione um esquema (ex.: 3-2, 2-3, 3-3-2) ou <i>auto</i>. O posicionamento usa a forma√ß√£o escolhida.
        </div>
      </div>

      <div class="row" id="toolbarTatico"></div>

      <div class="formations">
        <div class="pitch-wrap">
          <div class="pitch-head">
            <span class="badge">Time A</span>
            <select class="input select-small" id="formA" aria-label="Forma√ß√£o do time A"></select>
          </div>
          <div class="pitch">
            <div class="field" id="fieldA"><div class="players" id="playersA"></div></div>
          </div>
        </div>

        <div class="pitch-wrap">
          <div class="pitch-head">
            <span class="badge">Time B</span>
            <select class="input select-small" id="formB" aria-label="Forma√ß√£o do time B"></select>
          </div>
          <div class="pitch">
            <div class="field" id="fieldB"><div class="players" id="playersB"></div></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== Registrar Partida ===== -->
    <section class="card" id="registro">
      <h2>üóíÔ∏è Registrar partida
        <span class="help" aria-expanded="false" aria-label="Ajuda">
          ?
          <span class="tooltip">Informe os placares, escreva uma observa√ß√£o (opcional) e salve. O jogo vai para o Calend√°rio e o Ranking √© atualizado.</span>
        </span>
      </h2>

      <div class="helpbar">
        <div class="hint" data-hint>
          <b>Registro:</b> selecione os times em ‚ÄúAtletas‚Äù, informe o placar e clique em <b>Salvar partida</b>. O resultado aparece no <b>Calend√°rio</b>.
        </div>
      </div>

      <div class="row">
        <div class="score" role="group" aria-label="Placar">
          <span id="lblA">A</span>
          <input class="input score-in" id="placarA" type="number" min="0" step="1" inputmode="numeric" aria-label="Gols do time A" />
          <span class="x" aria-hidden="true">√ó</span>
          <input class="input score-in" id="placarB" type="number" min="0" step="1" inputmode="numeric" aria-label="Gols do time B" />
          <span id="lblB">B</span>
        </div>
      </div>

      <div class="row">
        <input class="input" id="obs" placeholder="ex.: rodada 3, amistoso" />
        <button class="btn" id="btnSalvar">Salvar partida</button>
        <button class="btn-ghost" id="btnDesfazerPartida">Desfazer</button>
      </div>

      <label class="row mt8">
        <input id="autoReset" type="checkbox" />
        <span class="muted">Reset autom√°tico di√°rio (s√≥ o quadro do dia)</span>
      </label>
      <button class="btn-ghost" id="btnResetHoje">Zerar HOJE</button>
    </section>

    <!-- ===== Calend√°rio ===== -->
    <section class="card" id="calendario">
      <h2>üìÖ Calend√°rio
        <span class="help" aria-expanded="false" aria-label="Ajuda">
          ?
          <span class="tooltip">Navegue pelos dias, veja jogos e exclua se precisar. O resumo mostra total de jogos e gols do dia.</span>
        </span>
      </h2>

      <div class="helpbar">
        <div class="hint" data-hint>
          <b>Navega√ß√£o:</b> use <b>Anterior/Pr√≥ximo</b> ou escolha uma data. Clique no bot√£o do card para excluir uma partida.
        </div>
      </div>

      <div class="cal-toolbar">
        <button class="btn-ghost" id="calPrev">‚Üê Anterior</button>
        <input class="input date-picker" type="date" id="pickDay" />
        <button class="btn-ghost" id="calNext">Pr√≥ximo ‚Üí</button>
      </div>

      <div class="cal-head">
        <span class="muted">Resumo do dia:</span>
        <span class="badge" id="calResumo">‚Äî</span>
      </div>

      <div class="games" id="listaJogosDia"></div>
    </section>

    <!-- ===== Ranking ===== -->
    <section class="card" id="tabela">
      <h2 class="row" style="justify-content:space-between">
        <span>üìä Ranking geral</span><span class="badge">Tabela</span>
      </h2>

      <div class="helpbar">
        <div class="hint" data-hint>
          <b>Crit√©rios:</b> ordena por <u>Pontos</u>, depois <u>Saldo (SG)</u>, depois <u>Gols Pr√≥ (GP)</u>, e por fim nome. <b>PPG</b> = Pontos por Jogo.
        </div>
      </div>

      <div id="chartPts" aria-label="Gr√°fico Top 10 por pontos"></div>
      <div id="chartWin" aria-label="Gr√°fico Top 5 por aproveitamento"></div>

      <table class="table" id="tblLiga">
        <thead>
          <tr>
            <th>#</th><th class="rank">Atleta</th>
            <th>J</th><th>V</th><th>E</th><th>D</th>
            <th>GP</th><th>GC</th><th>SG</th><th>Pts</th><th>PPG</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

  </main>

  <!-- Toast de feedback -->
  <div id="toast" aria-live="polite"></div>

  <noscript>
    <div class="container card" style="margin-top:12px">Ative o JavaScript para usar a Liga da Firma.</div>
  </noscript>

  <!-- Entrypoint correto (HTML est√° em /public) -->
  <script type="module" src="../src/main.js"></script>
</body>
</html>
